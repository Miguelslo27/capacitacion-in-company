{"request":{"hurl":"http:\/\/capacitacion.local\/wp-content\/plugins\/learnpress\/assets\/js\/frontend\/course.js","inline":"","disable_minification":false,"type":"js","handle":"course"},"log":"\/wp-content\/plugins\/learnpress\/assets\/js\/frontend\/course.js\r\n","code":"(function($,LP,_){'use strict';function LP_Storage(key){var storage=window.localStorage;this.key=key;this.get=function(id){var val=storage.getItem(this.key)||'',sections=val.split(',');if(id){id=id+'';var pos=sections.indexOf(id);if(pos>=0){return sections[pos]}}\nreturn sections}\nthis.set=function(sections){if(typeof sections!=='string'){sections=sections.join(',')}\nstorage.setItem(this.key,sections);return sections.split(',')}\nthis.hasSection=function(id){id=id+'';var sections=this.get(),at=sections.indexOf(id);return at>=0?at:!1}\nthis.add=function(id){id=id+'';var sections=this.get();if(this.hasSection(id)){return}\nsections.push(id);this.set(sections);return sections}\nthis.remove=function(id){id=id+'';var at=this.hasSection(id);if(at!==!1){var sections=this.get();sections.splice(at,1);this.set(sections);return sections}\nreturn!1}}\nfunction LP_Course(settings){var sectionStorage=new LP_Storage('sections'),$body=$('body'),$content=$('.content-item-scrollable'),$curriculum=$('#learn-press-course-curriculum'),$contentItem=$('#learn-press-content-item'),$curriculumScrollable=$curriculum.find('.curriculum-scrollable'),$header=$('#course-item-content-header'),$footer=$('#course-item-content-footer'),$courseItems=$curriculum.find('.course-item'),isShowingHeader=!0,fullScreen,contentTop=0,headerTimer,inPopup=!1;function toggleAnswerOptions(event){var $el=$(event.target),$chk;if($el.is('input.option-check')){return}\n$chk=$el.closest('.answer-option').find('input.option-check');if(!$chk.length){return}\nif($chk.is(':disabled')){return}\nif($chk.is(':checkbox')){$chk[0].checked=!$chk[0].checked}else{$chk[0].checked=!0}}\nfunction toggleSection(){var id=$(this).closest('.section').data('section-id');$(this).siblings('.section-content').slideToggle(function(){if($(this).is(':visible')){sectionStorage.remove(id)}else{sectionStorage.add(id)}})}\nfunction initSections(){var $activeSection=$('.course-item.current').closest('.section'),sections=$('.curriculum-sections').find('.section'),sectionId=$activeSection.data('section-id'),hiddenSections=[];if($activeSection){hiddenSections=sectionStorage.remove(sectionId)}else{hiddenSections=sectionStorage.get()}\nfor(var i=0;i<hiddenSections.length;i++){sections.filter('[data-section-id=\"'+hiddenSections[i]+'\"]').find('.section-content').hide()}}\nfunction prepareForm(form){var $answerOptions=$('.answer-options'),$form=$(form),data=$answerOptions.serializeJSON(),$hidden=$('<input type=\"hidden\" name=\"question-data\" \/>').val(JSON.stringify(data));if(($form.attr('method')+'').toLowerCase()!=='post'){return}\n$form.find('input[name=\"question-data\"]').remove();return $form.append($hidden).append($('<div \/>').append($answerOptions.clone()).hide())}\nfunction onTabCourseClick(e,tab){if($(document.body).hasClass('course-item-popup')){return}\nvar $tab=$(tab),$parent=$tab.closest('.course-nav');if($parent.siblings().length===0){return}\nLP.setUrl($tab.attr('href'))}\nfunction onSearchInputKeypress(e){if(e.type==='keypress'&&e.keyCode===13){return!1}\nvar s=this.value,r=new RegExp(s,'ig');$courseItems.map(function(){var $item=$(this),itemName=$item.find('.item-name').text();if(itemName.match(r)||!s.length){$item.show()}else{$item.hide()}});$('.section').show().each(function(){if(s.length){if(!$(this).find('.section-content').children(':visible').length){$(this).hide()}else{$(this).show()}}else{$(this).show()}});$(this).closest('.course-item-search').toggleClass('has-keyword',!!this.value.length)}\nfunction onClearSearchInputClick(e){var $form=$(this).closest('.course-item-search');$form.find('input').val('').trigger('keyup')}\nfunction onClickQM(){$('#qm').css({'z-index':999999999,position:'relative'});$('html, body').css('overflow','auto')}\nfunction getCurriculumWidth(){return $curriculum.outerWidth()}\nfunction maybeShowCurriculum(e){return;var offset=$(this).offset(),offsetX=e.pageX-offset.left,curriculumWidth=getCurriculumWidth();if(!fullScreen||(offsetX>50)){return}\ntimeoutToClose();if(!isShowingHeader){$curriculum.stop().animate({left:0});$contentItem.stop().animate({left:curriculumWidth});$footer.stop().animate({left:curriculumWidth},function(){$(document,window).trigger('learn-press\/toggle-content-item')});$header.find('.course-item-search').show();toggleEventShowCurriculum(!0);isShowingHeader=!0}}\nfunction toggleEventShowCurriculum(b){$(document)[b?'off':'on']('mousemove.maybe-show-curriculum','body',maybeShowCurriculum)}\nfunction timeoutToClose(){headerTimer&&clearTimeout(headerTimer);headerTimer=setTimeout(function(){var curriculumWidth=getCurriculumWidth();if(!fullScreen){return}\n$curriculum.stop().animate({left:-curriculumWidth});$contentItem.stop().animate({left:0});$footer.stop().animate({left:0},function(){$(document,window).trigger('learn-press\/toggle-content-item')});$header.find('.course-item-search').hide();isShowingHeader=!1;toggleEventShowCurriculum()},3000)}\nfunction toggleContentItem(e){e.preventDefault();var curriculumWidth=getCurriculumWidth();fullScreen=$body.toggleClass('full-screen-content-item').hasClass('full-screen-content-item');$curriculum.stop().animate({left:fullScreen?-curriculumWidth:0});$contentItem.stop().animate({left:fullScreen?0:curriculumWidth});$footer.stop().animate({left:fullScreen?0:curriculumWidth},function(){$(document,window).trigger('learn-press\/toggle-content-item')});isShowingHeader=!fullScreen;window.localStorage&&window.localStorage.setItem('lp-full-screen',fullScreen?'yes':'no');fullScreen&&toggleEventShowCurriculum();$header.find('.course-title').stop().animate({marginLeft:fullScreen?-curriculumWidth:0})\n$header.find('.course-item-search').stop().animate({opacity:fullScreen?0:1})}\nfunction initEvents(){$(document).on('learn-press\/nav-tabs\/clicked',onTabCourseClick).on('keyup keypress','.course-item-search input',onSearchInputKeypress).on('click','.course-item-search button',onClearSearchInputClick).on('click','#wp-admin-bar-query-monitor',onClickQM).on('click','.answer-options .answer-option',toggleAnswerOptions).on('click','.section-header',toggleSection).on('submit','form.lp-form',function(){prepareForm(this)}).on('click','.toggle-content-item',toggleContentItem);$curriculum.hover(function(){headerTimer&&clearTimeout(headerTimer)},function(){if(fullScreen)timeoutToClose()})}\nfunction initScrollbar(){$content.addClass('scrollbar-light').scrollbar({scrollx:!1});$content.parent().css({position:'absolute',top:0,bottom:$('#course-item-content-footer:visible').outerHeight()||0,width:'100%'}).css('opacity',1).end().css('opacity',1);$curriculumScrollable.addClass('scrollbar-light').scrollbar({scrollx:!1});$curriculumScrollable.parent().css({position:'absolute',top:0,bottom:0,width:'100%'}).css('opacity',1).end().css('opacity',1)}\nfunction fitVideo(){var $wrapContent=$('.content-item-summary.content-item-video');if(!$wrapContent.length){return}\nvar $entryVideo=$wrapContent.find('.entry-video'),$frame=$entryVideo.find('iframe'),width=$frame.attr('width'),height=$frame.attr('height'),ratio=1,contentHeight,timer;function resizeVideo(){var frameWidth=$frame.width();contentHeight=frameWidth*ratio;$frame.css({height:contentHeight,marginLeft:($entryVideo.width()-frameWidth)\/2});$wrapContent.css({paddingTop:contentHeight})}\nif(!$entryVideo.length){return!1}\nif(width&&height){if(width.indexOf('%')===-1&&height.indexOf('%')===-1){ratio=height\/width}}\n$(window).on('resize.fit-content-video learn-press\/toggle-content-item',function(){timer&&clearTimeout(timer);timer=setTimeout(resizeVideo,250)}).trigger('resize.fit-content-video');$('.content-item-scrollable').scroll(function(){$(this).find('.entry-video').css('padding-top',this.scrollTop)})}\nfunction init(){inPopup=$body.hasClass('course-item-popup');initSections();initEvents();if(!inPopup){return}\n$contentItem.appendTo($body);$curriculum.appendTo($body);if($('#wpadminbar').length){$body.addClass('wpadminbar');contentTop=32}\ninitScrollbar();fitVideo();fullScreen=window.localStorage&&'yes'===window.localStorage.getItem('lp-full-screen');if($(window).width()<=768){fullScreen=!0}\nif(fullScreen){var curriculumWidth=getCurriculumWidth();$body.addClass('full-screen-content-item');$contentItem.css('left',0);$curriculum.css('left',-curriculumWidth);$footer.css('left',0);isShowingHeader=!fullScreen;$header.find('.course-title').css({marginLeft:fullScreen?-curriculumWidth:0})\n$header.find('.course-item-search').css({opacity:fullScreen?0:1});toggleEventShowCurriculum()}\nsetTimeout(function(){var $cs=$body.find('.curriculum-sections').parent();$cs.scrollTo($cs.find('.course-item.current'),100);if(window.location.hash){$('.content-item-scrollable:last').scrollTo($(window.location.hash))}},300);$body.css('opacity',1)}\nnew LP.Alerts();init()}\nLP.Alerts=function(){this.isShowing=!1;var $doc=$(document),self=this,trigger=function(action,args){var triggered=$doc.triggerHandler(action,args);if(triggered!==undefined){return triggered}\nreturn $.isArray(args)?args[0]:undefined},confirmHandle=function(e){try{var $form=$(this),message=$form.data('confirm'),action=$form.data('action');message=trigger('learn-press\/confirm-message',[message,action]);if(!message){return!0}\njConfirm(message,'',function(confirm){confirm&&$form.off('submit.learn-press-confirm',confirmHandle).submit();self.isShowing=!1});self.isShowing=!0;return!1}catch(ex){console.log(ex)}\nreturn!0}\nthis.watchChange('isShowing',function(prop,oldVal,newVal){if(newVal){setTimeout(function(){$.alerts._reposition();$('#popup_container').addClass('ready')},30)\nvar $a=$('<a href=\"\" class=\"close\"><i class=\"fa fa-times\"><\/i><\/a>')\n$('#popup_container').append($a);$a.on('click',function(){$.alerts._hide();return!1})}\n$(document.body).toggleClass('confirm',newVal);return newVal});var $forms=$('form[data-confirm]').on('submit.learn-press-confirm',confirmHandle)}\n$(document).ready(function(){$(document).ready(function(){new LP_Course({});$(this).on('submit','form[name=\"course-external-link\"]',function(){var redirect=$(this).attr('action');if(redirect){window.location.href=redirect;return!1}})})})})(jQuery,LP,_);\r\n","status":true}